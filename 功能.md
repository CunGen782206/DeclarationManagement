[TOC]



# 界面

>states = 1 并且是审核表单（展示审核/原因）（展示认定项目等级/认定项目类别/认定金额/备注）
>
>其余审核表单 （展示审核/原因）（不展示认定项目等级/认定项目类别/认定金额/备注）
>
>decision = 1 并且是查看表单（不展示审核/原因）（展示认定项目等级/认定项目类别/认定金额/备注）
>
>decision = 3 并且是查看表单 （不展示审核/原因）（不展示认定项目等级/认定项目类别/认定金额/备注）
>
>其余decision 并且是查看表单 （不展示审核/原因/认定项目等级/认定项目类别/认定金额/备注）

## 所有界面审核状态如下

-  ShowDecision= 0（待预审核）
-  ShowDecision= 1（预审核驳回）
-  ShowDecision= 2（预审核不通过）
-  ShowDecision= 3（待初审）
-  ShowDecision= 4（初审驳回）
-  ShowDecision= 5（初审拟通过）
-  ShowDecision= 6（初审不通过）

## 申请界面

- 查看当前用户所有已申请的表单
  - 单条数据
    - Decision = 1 （查看）
    - Decision = 3 （查看）
    - Decision = 2 （修改）
    - Decision = 0 （查看）

## 审核界面

- 查看当前用户所有已审核和未审核的表单
  - 单条数据
    - Decision = 1 （查看）
    - Decision = 3 （查看）
    - Decision = 2 （查看）
    - Decision = 0 （审核）

## 查看所有审核完成界面

> 教务处审核人员拥有此页面

- 查看当前用户所有的审核完成界面
  - 单条数据
    - Decision = 1 （审核完成，查看）
    - Decision = 3 （审批不通过，查看）



## 申请表单界面

- 展示数据

  - 项目负责人（默认从User.Name中获取初始所属部门）

    > ProjectLeader

  - 联系方式

    >ContactWay

  - 所属部门（选项）（默认从User.Role中获取初始所属部门）

    >Department

    - 选项待给出

  - 项目名称

    >ProjectName

  - 项目类别（选项）

    >ProjectCategory

    - 专业建设类
    - 课程设计类
    - 师资建设类
    - 教学竞赛类
    - 教材建设类
    - 教学成果类

  - 项目等级（选项）

    >ProjectLevel

    - 国家级
    - 市级
    - 行业/教指委一级
    - 行业/教指委二级
    - 校级

  - 奖项级别（选项）

    >AwardLevel

    - 一等第
    - 二等第
    - 三等第
    - 四等第
    - 无

  - 参与形式（选项）

    >ParticipationForm

    - 个人
    - 团队

  - 认定批文文件名称

    >ApprovalFileName

  - 认定批文文件号

    > ApprovalFileNumber

  - 项目内容

    > ItemDescription

  - 项目成果

    >ProjectOutcome



## 审核表单界面

### 预审（第一次审核）

展示数据

> 下面数据通过ApplicationForm表单中获取（并且为不可修改状态）

- 项目负责人
- 联系方式
- 所属部门
- 项目名称
- 项目类别
- 项目等级
- 奖项级别
- 参与形式
- 认定批文文件名称
- 认定批文文件号
- 项目内容
- 项目成果

- 审批记录（申请表单中没有）（审批记录有多条）（若为0则不显示）

  >ApprovalRecords

> 下面数据为填写数据

- 处理意见（选项）

  > Decision

  - 1拟同意
  - 2拟不同意
  - 3不同意

- 原因

  > Comments

### 初审（第二次审核）

展示数据

> 下面数据通过ApplicationForm表单中获取（并且为不可修改状态）

- 项目负责人
- 联系方式
- 所属部门
- 项目名称
- 项目类别
- 项目等级
- 奖项级别
- 参与形式
- 认定批文文件名称
- 认定批文文件号
- 项目内容
- 项目成果

- 审批记录（申请表单中没有）

> 下面数据为填写数据

- 处理意见（选项）

  > Decision

  - 1拟同意
  - 2驳回
  - 3不同意

- 原因

  > Comments

- 认定等级（选项）（默认从项目等级中获取）

  > RecognitionLevel

  - 国家级
  - 市级
  - 行业/教指委一级
  - 行业/教指委二级
  - 校级

- 认定金额

  >DeemedAmount

- 备注

  > Remarks

## 查看（修改）表单界面

展示数据

> 下面数据通过ApplicationForm表单中获取（查看表单下面数据为不可修改状态）

- 项目负责人
- 联系方式
- 所属部门
- 项目名称
- 项目类别
- 项目等级
- 奖项级别
- 参与形式
- 认定批文文件名称
- 认定批文文件号
- 项目内容
- 项目成果
- 审批记录（申请表单中没有）



## 审批记录（辅助上方的审批记录）

展示数据

> 下方数据仅展示

- 审批时间

  >ApprovalDate

- 审批角色

  > User.Role

- 审批决定（1拟同意，2拟不同意，3不同意）

  >Decision

- 审批意见

  >Comments



# 功能

## 登录：

>POST: /api/Public/login

- 返回数据 User信息

  需要储存当前User所有信息

  请求体：

  ```json
  {
    "username": "账号",
    "password": "密码"
  }
  ```

  返回值：

  ```json
  {
    "userID": 1,
    "username": "444",
    "password": "123456",
    "role": "组织人事处",
    "power": "审核用户",
    "jobNumber": "444",
    "name": "王芳"
  }
  ```

## 修改密码：

>POST:/api/Public/changePassword

- 返回200

  请求体：

  ```json
  {
    "username": "账号",
    "password": "密码"
  }
  ```

## 所有申请界面表单

> POST：/getUserStates/default

## 所有审核界面表单

> POST：/getUserStates/approval

- 返回所有表单基础信息

  请求体：只需要填写userID即可

  ```json
  {
    "userID": 1,
    "username": "",
    "password": "",
    "role": "",
    "power": "",
    "jobNumber": "",
    "name": ""
  }
  ```

  返回值：

  ```json
  [
    {
      "formID": 1,
      "projectLeader": "1",
      "department": "教务处",
      "projectName": "1",
      "projectCategory": "1",
      "projectLevel": "12",
      "approvalDate": "2024-10-11T19:26:00",
      "decision": 0
    },
    {
      "formID": 4,
      "projectLeader": "123",
      "department": "教务处",
      "projectName": "123",
      "projectCategory": "",
      "projectLevel": "",
      "approvalDate": "2024-10-11T20:09:00",
      "decision": 2
    }
  ]
  ```

  申请界面中：

  - decision = 1 （审核完成，查看）
  - decision = 3 （审批不通过，查看）
  - decision = 2 （审批驳回，修改）
  - decision = 0 （待审核，查看）

  审核界面中：

  - decision = 1 （审核完成，查看）
  - decision = 3 （审批不通过，查看）
  - decision = 2 （审批驳回，查看）
  - decision = 0 （待审核，审核）

  查看界面中：

  - decision = 1 （审核完成，查看）
  - decision = 3 （审批不通过，查看）

- formID再 /getForm （打开单张表单时）中使用



## 所有查看界面表单

> GET：/getUserStates/allForm

 返回值和上述返回值一致



## 申请表单

## 修改表单

> 暂时不写



## 点击审核表单按钮/点击查看表单按钮（表单显示按照最上面的说明显示）

> /getForm

请求体：

```json
{
  "getCode": 1,
  "formID": 1
}
```

getcode填写数据：//审核按钮填1  查看按钮填0

formID填写数据：//填上述formID

返回体：

<span style="color:red">recognitionLevel 改为    "recognitionProjectLevel": "认定项目等级"和"recognitionAwardLevel": "认定奖项级别",</span>

```json
{
  "tableSummaries": 1,
  "applicationFormDto": {
    "applicationFormID": 1,
    "projectLeader": "1",
    "contactWay": "1",
    "department": "教务处",
    "projectName": "1",
    "projectCategory": "1",
    "projectLevel": "12",
    "awardLevel": "1231231",
    "participationForm": "214124124",
    "approvalFileName": "345十分士大夫",
    "approvalFileNumber": "啊实打实打算",
    "approvalFileAttachmentName":"111111",  
    "itemDescription": "啊撒大苏打撒",
    "projectOutcome": "阿瑟发动广大",
    "decision": 0,
    "auditDepartment": "萨芬阿飞",
    "comments": "",
    "recognitionProjectLevel": "认定项目等级",
    "recognitionAwardLevel": "认定奖项级别",
    "deemedAmount": 0,
    "remarks": "",
    "userID": 1,
    "states": 1,
    "approvalRecords": [
      {
        "approvalRecordID": 1,
        "applicationFormID": 1,
        "userID": 21,
        "approvalDate": "2024-10-11T21:22:00",
        "decision": 1,
        "comments": "理由在这里",
        "user": {
          "userID": 21,
          "username": "2021",
          "password": "111111",
          "role": "教务处",
          "power": "审核用户",
          "jobNumber": "2021",
          "name": "李君春"
        }
      }
    ]
  }
}
```



## 填写审核数据完毕后，点击审核按钮

> POST：/approvalForm

请求体：

<span style="color:red">recognitionLevel 改为    "recognitionProjectLevel": "认定项目等级"和"recognitionAwardLevel": "认定奖项级别",</span>

```json
{
  "applicationFormID": 1,
  "tableSummaryID": 1,
  "userID": 21,
  "decision": 0,
  "comments": "审批意见",
  "recognitionProjectLevel": "认定项目等级",
  "recognitionAwardLevel": "认定奖项级别",
  "deemedAmount": 0,
  "remarks": "审核"
}
```

applicationFormID：上一个中的applicationFormID

tableSummaryID：上一个中的tableSummaryID

userID：当前审核人员的ID（也就是当前登录的审核人员的ID）

decision：（填写对应的int值）

- 1拟同意
- 2拟不同意
- 3不同意

comments：审批意见

recognitionLevel: 认定等级（第二次审核才进行赋值）

DeemedAmount：认定金额（第二次审核才进行赋值）

remarks: 备注（第二次审核才进行赋值）